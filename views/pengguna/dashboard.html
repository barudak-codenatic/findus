<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard Pengguna</title>
  </head>
  <body>
    <h1>Dashboard Pengguna</h1>
    <p id="user-info">Memuat data...</p>
    <hr />
    <h2>Fitur</h2>
    <ul>
      <li><a href="#">Lihat Daftar Jasa</a></li>
      <li><a href="#">Pesanan Saya</a></li>
      <li><a href="#">Profil</a></li>
    </ul>
    <br />
    <a href="/logout">Logout</a>

    <script>
      fetch("/api/me")
        .then((res) => res.json())
        .then((data) => {
          if (!data.user || data.user.role !== "USER") {
            alert("Akses ditolak atau bukan role USER");
            window.location = "/login";
          } else {
            document.getElementById(
              "user-info"
            ).textContent = `Halo, ${data.user.name} (Role: ${data.user.role})`;
          }
        });
    </script>
  </body>
</html>
